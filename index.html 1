<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qur'on Hifz Test - Professional</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary: #047857;
            --primary-dark: #065f46;
            --primary-light: #10b981;
            --gold: #d97706;
            --gold-light: #f59e0b;
            --bg: #f0fdf4;
            --bg-light: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
            --success: #16a34a;
            --error: #dc2626;
            --radius: 16px;
            --shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .arabic {
            font-family: 'Scheherazade New', serif;
            font-size: 2rem;
            direction: rtl;
            line-height: 2.2;
        }

        /* HEADER */
        header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .header-inner {
            max-width: 1300px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
            cursor: pointer;
        }

        .logo-box {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Scheherazade New', serif;
            font-size: 1.8rem;
            color: white;
        }

        .logo h1 { font-size: 1.4rem; }
        .logo small { opacity: 0.9; font-size: 0.8rem; }

        nav { display: flex; gap: 8px; flex-wrap: wrap; }

        nav button {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 10px 18px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s;
        }

        nav button:hover, nav button.active {
            background: var(--gold);
        }

        /* MAIN */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            min-height: calc(100vh - 200px);
        }

        section { display: none; }
        section.active { display: block; animation: fadeIn 0.3s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* HOME */
        .hero {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            border-radius: var(--radius);
            padding: 3rem 2rem;
            text-align: center;
            color: white;
            margin-bottom: 2rem;
        }

        .hero .bismillah {
            font-family: 'Scheherazade New', serif;
            font-size: 2.5rem;
            color: var(--gold-light);
            margin-bottom: 1rem;
        }

        .hero h2 { font-size: 2.2rem; margin-bottom: 1rem; }
        .hero p { opacity: 0.9; max-width: 600px; margin: 0 auto 1.5rem; }

        .hero-btns { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }

        .btn {
            padding: 12px 28px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-gold {
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            color: white;
        }

        .btn-gold:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(217,119,6,0.3); }

        .btn-outline {
            background: transparent;
            color: white;
            border: 2px solid rgba(255,255,255,0.5);
        }

        .btn-outline:hover { background: rgba(255,255,255,0.1); border-color: white; }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-light {
            background: white;
            color: var(--primary-dark);
        }

        /* FEATURES */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .feature {
            background: white;
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .feature:hover { transform: translateY(-5px); }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .feature h3 { color: var(--primary-dark); margin-bottom: 0.5rem; }
        .feature p { color: var(--text-light); font-size: 0.95rem; }

        /* JUZ SELECT */
        .page-title {
            text-align: center;
            margin-bottom: 2rem;
        }

        .page-title h2 { font-size: 1.8rem; color: var(--primary-dark); }
        .page-title p { color: var(--text-light); }

        .juz-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
            gap: 10px;
            margin-bottom: 2rem;
        }

        .juz-btn {
            aspect-ratio: 1;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            transition: all 0.3s;
        }

        .juz-btn small { font-size: 0.65rem; color: var(--text-light); font-weight: 500; }

        .juz-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            transform: scale(1.05);
        }

        .juz-btn:hover small { color: rgba(255,255,255,0.8); }

        .full-btn {
            display: block;
            width: 100%;
            max-width: 450px;
            margin: 0 auto;
            padding: 1.2rem;
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .full-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(217,119,6,0.3); }

        /* TEST */
        .test-box {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .test-header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            padding: 1.5rem 2rem;
            color: white;
        }

        .test-header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .test-header h3 { font-size: 1.3rem; }
        .test-header span { opacity: 0.85; font-size: 0.9rem; }

        .counters { display: flex; gap: 1rem; }

        .counter {
            background: rgba(255,255,255,0.15);
            padding: 8px 16px;
            border-radius: 10px;
            text-align: center;
        }

        .counter strong { display: block; font-size: 1.4rem; color: var(--gold-light); }
        .counter small { font-size: 0.7rem; opacity: 0.85; }

        .progress {
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            margin-top: 1rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gold-light);
            border-radius: 3px;
            transition: width 0.4s;
        }

        .test-body { padding: 2rem; }

        .q-badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .q-type {
            display: inline-block;
            background: var(--gold-light);
            color: white;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .q-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text);
        }

        .ayah-box {
            background: linear-gradient(135deg, #fefce8, #fef9c3);
            border: 2px solid #fde047;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .ayah-box .arabic { color: var(--text); }

        .options { display: flex; flex-direction: column; gap: 10px; }

        .option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover:not(.locked) {
            border-color: var(--primary);
            background: rgba(4,120,87,0.05);
        }

        .option.selected { border-color: var(--primary); background: rgba(4,120,87,0.1); }
        .option.correct { border-color: var(--success); background: rgba(22,163,74,0.1); }
        .option.wrong { border-color: var(--error); background: rgba(220,38,38,0.1); }
        .option.locked { cursor: default; }

        .opt-letter {
            width: 36px;
            height: 36px;
            background: white;
            border: 2px solid #cbd5e1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--primary);
            flex-shrink: 0;
        }

        .option.selected .opt-letter { background: var(--primary); border-color: var(--primary); color: white; }
        .option.correct .opt-letter { background: var(--success); border-color: var(--success); color: white; }
        .option.wrong .opt-letter { background: var(--error); border-color: var(--error); color: white; }

        .opt-text { flex: 1; }
        .opt-text .arabic { font-size: 1.4rem; }

        .feedback {
            margin-top: 1rem;
            padding: 12px 16px;
            border-radius: 10px;
            font-weight: 600;
            display: none;
        }

        .feedback.show { display: flex; align-items: center; gap: 10px; }
        .feedback.ok { background: rgba(22,163,74,0.1); color: var(--success); border: 1px solid var(--success); }
        .feedback.err { background: rgba(220,38,38,0.1); color: var(--error); border: 1px solid var(--error); }

        .test-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 2px solid #f1f5f9;
        }

        .next-btn { display: none; }
        .next-btn.show { display: inline-flex; }

        /* RESULTS */
        .result-box {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .result-top {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            padding: 2.5rem;
            text-align: center;
            color: white;
        }

        .result-top h2 { margin-bottom: 1.5rem; }

        .score-circle {
            width: 150px;
            height: 150px;
            border: 6px solid var(--gold-light);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            background: rgba(255,255,255,0.1);
        }

        .score-circle .pct { font-size: 3rem; font-weight: 800; color: var(--gold-light); }
        .score-circle small { opacity: 0.85; }

        .grade {
            display: inline-block;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .grade.excellent { background: var(--gold-light); color: white; }
        .grade.good { background: var(--success); color: white; }
        .grade.average { background: #f59e0b; color: white; }
        .grade.poor { background: var(--error); color: white; }

        .result-bottom { padding: 2rem; }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat {
            text-align: center;
            padding: 1.2rem;
            background: #f8fafc;
            border-radius: 12px;
        }

        .stat .icon { font-size: 1.3rem; margin-bottom: 0.5rem; }
        .stat .val { font-size: 1.8rem; font-weight: 800; }
        .stat small { color: var(--text-light); font-size: 0.8rem; }
        .stat.s-ok .val { color: var(--success); }
        .stat.s-err .val { color: var(--error); }

        .tip-box {
            background: #fefce8;
            border-left: 4px solid var(--gold);
            padding: 1rem 1.5rem;
            border-radius: 0 10px 10px 0;
            margin-bottom: 1.5rem;
        }

        .tip-box h4 { color: var(--gold); margin-bottom: 0.5rem; }
        .tip-box p { color: var(--text-light); font-size: 0.95rem; }

        .result-btns { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }

        /* WISDOM */
        .wisdom-list { display: grid; gap: 1.5rem; }

        .wisdom-card {
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .wisdom-ayah {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            padding: 1.5rem;
            text-align: center;
        }

        .wisdom-ayah .arabic { color: white; font-size: 1.6rem; }

        .wisdom-ref {
            display: inline-block;
            background: rgba(217,119,6,0.3);
            color: var(--gold-light);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-top: 1rem;
        }

        .wisdom-body { padding: 1.5rem; }
        .wisdom-body h4 { color: var(--primary-dark); margin-bottom: 0.5rem; }
        .wisdom-body p { color: var(--text-light); line-height: 1.7; }

        /* ADVICE */
        .advice-list { display: grid; gap: 1rem; }

        .advice-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .advice-num {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .advice-text h4 { color: var(--primary-dark); margin-bottom: 0.5rem; }
        .advice-text p { color: var(--text-light); font-size: 0.95rem; line-height: 1.7; }

        /* FOOTER */
        footer {
            background: var(--primary-dark);
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: 3rem;
        }

        footer .copy { color: var(--gold-light); font-weight: 600; margin-top: 0.5rem; }

        /* MOBILE */
        @media (max-width: 768px) {
            .header-inner { flex-direction: column; }
            nav { justify-content: center; }
            .hero { padding: 2rem 1rem; }
            .hero h2 { font-size: 1.6rem; }
            .hero .bismillah { font-size: 1.8rem; }
            .test-body { padding: 1.5rem; }
            .ayah-box .arabic { font-size: 1.5rem; }
            .stats { grid-template-columns: 1fr; }
            .advice-card { flex-direction: column; text-align: center; }
            .advice-num { margin: 0 auto; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-inner">
            <div class="logo" onclick="goTo('home')">
                <div class="logo-box">Ù‚</div>
                <div>
                    <h1>Qur'on Hifz Test</h1>
                    <small>Hofizlar uchun professional sinov</small>
                </div>
            </div>
            <nav id="navMenu">
                <button class="active" onclick="goTo('home')">ğŸ  Bosh sahifa</button>
                <button onclick="goTo('juz')">ğŸ“– Juz tanlash</button>
                <button onclick="goTo('continue')">âœï¸ Davomini top</button>
                <button onclick="goTo('wisdom')">ğŸ’ Hikmatlar</button>
                <button onclick="goTo('advice')">ğŸ“ Tavsiyalar</button>
            </nav>
        </div>
    </header>

    <main>
        <!-- BOSH SAHIFA -->
        <section id="home" class="active">
            <div class="hero">
                <div class="bismillah">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
                <h2>Qur'on yodlash sinovlari</h2>
                <p>Hofizlar va Qur'on o'rganuvchilar uchun yuqori sifatli, aql-idrokni sinab ko'radigan testlar tizimi.</p>
                <div class="hero-btns">
                    <button class="btn btn-gold" onclick="goTo('juz')">ğŸ“– Testni boshlash</button>
                    <button class="btn btn-outline" onclick="goTo('continue')">âœï¸ Davomini top</button>
                </div>
            </div>
            <div class="features">
                <div class="feature">
                    <div class="feature-icon">ğŸ“š</div>
                    <h3>30 ta Juz</h3>
                    <p>Har bir juz uchun 50+ savol. Istagan juzni tanlab test yeching.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ§ </div>
                    <h3>Yuqori IQ testlar</h3>
                    <p>O'xshash oyatlarni farqlash, so'z tartibini aniqlash, diqqatni sinash.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">âœï¸</div>
                    <h3>Davomini top</h3>
                    <p>Oyat boshlanishi beriladi, to'g'ri davomini toping.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ“Š</div>
                    <h3>Batafsil natijalar</h3>
                    <p>Foiz, daraja va shaxsiy tavsiyalar bilan to'liq tahlil.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ’</div>
                    <h3>15+ hikmat</h3>
                    <p>Qur'ondagi eng hikmatli oyatlar va ularning sharhlari.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ğŸ“</div>
                    <h3>12 ta tavsiya</h3>
                    <p>Yodlash va mustahkamlash bo'yicha amaliy maslahatlar.</p>
                </div>
            </div>
        </section>

        <!-- JUZ TANLASH -->
        <section id="juz">
            <div class="page-title">
                <h2>ğŸ“– Juz tanlang</h2>
                <p>Test uchun juzni tanlang yoki butun Qur'ondan sinov oling</p>
            </div>
            <div class="juz-grid" id="juzGrid"></div>
            <button class="full-btn" onclick="startFullTest()">ğŸ•‹ Butun Qur'ondan test (20 savol)</button>
        </section>

        <!-- TEST -->
        <section id="test">
            <div class="test-box">
                <div class="test-header">
                    <div class="test-header-top">
                        <div>
                            <h3 id="testTitle">Test</h3>
                            <span>Har savolni diqqat bilan o'qing</span>
                        </div>
                        <div class="counters">
                            <div class="counter">
                                <strong id="cntOk">0</strong>
                                <small>To'g'ri</small>
                            </div>
                            <div class="counter">
                                <strong id="cntErr">0</strong>
                                <small>Xato</small>
                            </div>
                        </div>
                    </div>
                    <div class="progress">
                        <div class="progress-fill" id="progBar"></div>
                    </div>
                </div>
                <div class="test-body">
                    <div>
                        <span class="q-badge" id="qNum">Savol 1/10</span>
                        <span class="q-type" id="qType">Aniqlash</span>
                    </div>
                    <div class="q-text" id="qText"></div>
                    <div class="ayah-box">
                        <div class="arabic" id="qAyah"></div>
                    </div>
                    <div class="options" id="optsBox"></div>
                    <div class="feedback" id="feedback"></div>
                    <div class="test-footer">
                        <button class="btn btn-light" onclick="goTo('juz')">â¬…ï¸ Orqaga</button>
                        <button class="btn btn-gold next-btn" id="nextBtn" onclick="nextQ()">Keyingisi â¡ï¸</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- DAVOMINI TOP -->
        <section id="continue">
            <div class="test-box">
                <div class="test-header">
                    <div class="test-header-top">
                        <div>
                            <h3>âœï¸ Oyat davomini toping</h3>
                            <span>To'g'ri davomini tanlang</span>
                        </div>
                        <div class="counters">
                            <div class="counter">
                                <strong id="contOk">0</strong>
                                <small>To'g'ri</small>
                            </div>
                            <div class="counter">
                                <strong id="contErr">0</strong>
                                <small>Xato</small>
                            </div>
                        </div>
                    </div>
                    <div class="progress">
                        <div class="progress-fill" id="contProg"></div>
                    </div>
                </div>
                <div class="test-body">
                    <span class="q-badge" id="contNum">Savol 1/15</span>
                    <div class="q-text">Quyidagi oyatning davomini toping:</div>
                    <div class="ayah-box">
                        <div class="arabic" id="contAyah"></div>
                    </div>
                    <div class="options" id="contOpts"></div>
                    <div class="feedback" id="contFeed"></div>
                    <div class="test-footer">
                        <button class="btn btn-light" onclick="goTo('home')">â¬…ï¸ Orqaga</button>
                        <button class="btn btn-gold next-btn" id="contNext" onclick="nextCont()">Keyingisi â¡ï¸</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- NATIJALAR -->
        <section id="results">
            <div class="result-box">
                <div class="result-top">
                    <h2>ğŸ“Š Test natijalari</h2>
                    <div class="score-circle">
                        <div class="pct" id="resPct">0%</div>
                        <small>ball</small>
                    </div>
                    <div class="grade" id="resGrade">Yaxshi</div>
                </div>
                <div class="result-bottom">
                    <div class="stats">
                        <div class="stat">
                            <div class="icon">ğŸ“</div>
                            <div class="val" id="resTotal">0</div>
                            <small>Jami</small>
                        </div>
                        <div class="stat s-ok">
                            <div class="icon">âœ…</div>
                            <div class="val" id="resOk">0</div>
                            <small>To'g'ri</small>
                        </div>
                        <div class="stat s-err">
                            <div class="icon">âŒ</div>
                            <div class="val" id="resErr">0</div>
                            <small>Xato</small>
                        </div>
                    </div>
                    <div class="tip-box">
                        <h4>ğŸ’¡ Tavsiya</h4>
                        <p id="resTip"></p>
                    </div>
                    <div class="result-btns">
                        <button class="btn btn-light" onclick="goTo('juz')">ğŸ“– Boshqa juz</button>
                        <button class="btn btn-gold" onclick="retry()">ğŸ”„ Qaytadan</button>
                        <button class="btn btn-primary" onclick="goTo('home')">ğŸ  Bosh sahifa</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- HIKMATLAR -->
        <section id="wisdom">
            <div class="page-title">
                <h2>ğŸ’ Qur'on hikmatlari</h2>
                <p>Qur'oni Karimdagi eng hikmatli oyatlar va ularning ma'nolari</p>
            </div>
            <div class="wisdom-list" id="wisdomBox"></div>
        </section>

        <!-- TAVSIYALAR -->
        <section id="advice">
            <div class="page-title">
                <h2>ğŸ“ Qur'on yodlash tavsiyalari</h2>
                <p>Amaliy va samarali maslahatlar</p>
            </div>
            <div class="advice-list" id="adviceBox"></div>
        </section>
    </main>

    <footer>
        <p>Qur'on Hifz Test - Professional sinov tizimi</p>
        <p class="copy">Â© Muhammad Daler tomonidan ishlab chiqarilgan</p>
    </footer>

    <script>
    // ==================== MA'LUMOTLAR BAZASI ====================

    const QUESTIONS = {
        1: [
            { type: "sura", q: "Bu oyat qaysi suradan?", ayah: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙ†Ù", opts: ["Al-Fotiha", "Al-Baqara", "Ali Imron", "An-Niso"], ans: 0 },
            { type: "ma'no", q: "Bu oyatda nima so'ralmoqda?", ayah: "Ø§Ù‡Ù’Ø¯ÙÙ†ÙØ§ Ø§Ù„ØµÙÙ‘Ø±ÙØ§Ø·Ù Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙÙ‚ÙÙŠÙ…Ù", opts: ["To'g'ri yo'lga hidoyat", "Rizq so'rash", "Gunohdan mag'firat", "Sabr so'rash"], ans: 0 },
            { type: "davom", q: "Oyatning davomi qanday?", ayah: "Ø¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ¹Ù’Ø¨ÙØ¯Ù ...", opts: ["ÙˆÙØ¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ³Ù’ØªÙØ¹ÙÙŠÙ†Ù", "ÙˆÙØ¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ³Ù’Ø£ÙÙ„Ù", "ÙˆÙØ¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ±Ù’Ø¬ÙÙˆ", "ÙˆÙÙ†ÙØ­Ù’Ù†Ù Ù„ÙÙƒÙ Ø¹ÙØ§Ø¨ÙØ¯ÙÙˆÙ†Ù"], ans: 0 },
            { type: "son", q: "Fotiha surasida nechta oyat bor?", ayah: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù", opts: ["7 ta", "6 ta", "5 ta", "8 ta"], ans: 0 },
            { type: "ma'no", q: "Bu oyat nimani bildiradi?", ayah: "Ù…ÙØ§Ù„ÙÙƒÙ ÙŠÙÙˆÙ’Ù…Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù", opts: ["Qiyomat kunining Egasi", "Dunyoning Egasi", "Jannatning Egasi", "Osmonning Egasi"], ans: 0 },
            { type: "harf", q: "Baqara surasi qanday harflar bilan boshlanadi?", ayah: "Ø§Ù„Ù…", opts: ["Alif Lom Mim", "Ha Mim", "Yo Sin", "Alif Lom Ro"], ans: 0 },
            { type: "mavzu", q: "Bu oyat qaysi kitob haqida?", ayah: "Ø°ÙÙ°Ù„ÙÙƒÙ Ø§Ù„Ù’ÙƒÙØªÙØ§Ø¨Ù Ù„ÙØ§ Ø±ÙÙŠÙ’Ø¨Ù ÙÙÙŠÙ‡Ù", opts: ["Qur'on", "Tavrot", "Injil", "Zabur"], ans: 0 },
            { type: "sifat", q: "Muttaqiylarning birinchi sifati qaysi?", ayah: "Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù ÙŠÙØ¤Ù’Ù…ÙÙ†ÙÙˆÙ†Ù Ø¨ÙØ§Ù„Ù’ØºÙÙŠÙ’Ø¨Ù", opts: ["G'aybga iymon", "Namoz o'qish", "Zakot berish", "Ro'za tutish"], ans: 0 },
            { type: "kim", q: "Bu oyatda kimlar ta'riflangan?", ayah: "Ø®ÙØªÙÙ…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø¹ÙÙ„ÙÙ‰Ù° Ù‚ÙÙ„ÙÙˆØ¨ÙÙ‡ÙÙ…Ù’ ÙˆÙØ¹ÙÙ„ÙÙ‰Ù° Ø³ÙÙ…Ù’Ø¹ÙÙ‡ÙÙ…Ù’", opts: ["Kofirlar", "Mo'minlar", "Munofiqlar", "Solihlar"], ans: 0 },
            { type: "davom", q: "Oyatning davomi qanday?", ayah: "ØºÙÙŠÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙÙ„ÙÙŠÙ’Ù‡ÙÙ…Ù’ ...", opts: ["ÙˆÙÙ„ÙØ§ Ø§Ù„Ø¶ÙÙ‘Ø§Ù„ÙÙ‘ÙŠÙ†Ù", "ÙˆÙÙ„ÙØ§ Ø§Ù„Ù’ÙƒÙØ§ÙÙØ±ÙÙŠÙ†Ù", "ÙˆÙÙ„ÙØ§ Ø§Ù„Ø¸ÙÙ‘Ø§Ù„ÙÙ…ÙÙŠÙ†Ù", "ÙˆÙÙ„ÙØ§ Ø§Ù„Ù’Ù…ÙÙ†ÙØ§ÙÙÙ‚ÙÙŠÙ†Ù"], ans: 0 },
            { type: "farq", q: "Bu ikkala sifat Allohning qaysi ismlaridan?", ayah: "Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù", opts: ["Rahmon va Rahim", "G'ofur va Rahim", "Karim va Latif", "Malik va Quddus"], ans: 0 },
            { type: "tartib", q: "Fotiha surasida bu qaysi oyat?", ayah: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙ†Ù", opts: ["2-oyat", "1-oyat", "3-oyat", "4-oyat"], ans: 0 }
        ],
        30: [
            { type: "sura", q: "Bu oyat qaysi suradan?", ayah: "Ø¹ÙÙ…ÙÙ‘ ÙŠÙØªÙØ³ÙØ§Ø¡ÙÙ„ÙÙˆÙ†Ù", opts: ["Naba'", "Naziat", "Abasa", "Takwir"], ans: 0 },
            { type: "sura", q: "Bu oyat qaysi suradan?", ayah: "Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙØ­ÙØ¯ÙŒ", opts: ["Ikhlos", "Falaq", "Nos", "Kawthar"], ans: 0 },
            { type: "son", q: "Kawthar surasi necha oyat?", ayah: "Ø¥ÙÙ†ÙÙ‘Ø§ Ø£ÙØ¹Ù’Ø·ÙÙŠÙ’Ù†ÙØ§ÙƒÙ Ø§Ù„Ù’ÙƒÙÙˆÙ’Ø«ÙØ±Ù", opts: ["3 ta", "4 ta", "5 ta", "2 ta"], ans: 0 },
            { type: "kim", q: "Bu oyatda kim zikr qilingan?", ayah: "ØªÙØ¨ÙÙ‘ØªÙ’ ÙŠÙØ¯ÙØ§ Ø£ÙØ¨ÙÙŠ Ù„ÙÙ‡ÙØ¨Ù ÙˆÙØªÙØ¨ÙÙ‘", opts: ["Abu Lahab", "Abu Jahl", "Abu Sufyon", "Fir'avn"], ans: 0 },
            { type: "davom", q: "Oyatning davomi?", ayah: "Ø¥ÙØ°ÙØ§ Ø¬ÙØ§Ø¡Ù Ù†ÙØµÙ’Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ...", opts: ["ÙˆÙØ§Ù„Ù’ÙÙØªÙ’Ø­Ù", "ÙˆÙØ§Ù„Ù†ÙÙ‘ØµÙ’Ø±Ù", "ÙˆÙØ§Ù„Ù’Ù‡ÙØ¯ÙÙ‰Ù°", "ÙˆÙØ§Ù„Ù’Ø¥ÙÙŠÙ…ÙØ§Ù†Ù"], ans: 0 },
            { type: "sura", q: "Bu qaysi sura?", ayah: "Ù‚ÙÙ„Ù’ ÙŠÙØ§ Ø£ÙÙŠÙÙ‘Ù‡ÙØ§ Ø§Ù„Ù’ÙƒÙØ§ÙÙØ±ÙÙˆÙ†Ù", opts: ["Kafirun", "Ikhlos", "Nos", "Falaq"], ans: 0 },
            { type: "voqea", q: "Fil surasi qaysi voqeani eslatadi?", ayah: "Ø£ÙÙ„ÙÙ…Ù’ ØªÙØ±Ù ÙƒÙÙŠÙ’ÙÙ ÙÙØ¹ÙÙ„Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ Ø¨ÙØ£ÙØµÙ’Ø­ÙØ§Ø¨Ù Ø§Ù„Ù’ÙÙÙŠÙ„Ù", opts: ["Fil egalarining halokati", "Uhud jangi", "Badr jangi", "Makka fathi"], ans: 0 },
            { type: "mavzu", q: "Quraysh surasi nima haqida?", ayah: "Ù„ÙØ¥ÙÙŠÙ„ÙØ§ÙÙ Ù‚ÙØ±ÙÙŠÙ’Ø´Ù", opts: ["Qurayshning ne'matlari", "Qurayshning jangi", "Qurayshning hijrati", "Qurayshning savdosi"], ans: 0 },
            { type: "ma'no", q: "Asr surasining asosiy g'oyasi?", ayah: "ÙˆÙØ§Ù„Ù’Ø¹ÙØµÙ’Ø±Ù Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù Ù„ÙÙÙÙŠ Ø®ÙØ³Ù’Ø±Ù", opts: ["Inson ziyonda ekanligi", "Vaqtning qadr", "Qiyomat belgilari", "Jannat ta'rifi"], ans: 0 },
            { type: "davom", q: "Oyatning davomi?", ayah: "Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ ...", opts: ["Ø§Ù„Ù’ÙÙÙ„ÙÙ‚Ù", "Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù", "Ø§Ù„Ù’Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙ†Ù", "Ø§Ù„Ø³ÙÙ‘Ù…ÙØ§ÙˆÙØ§ØªÙ"], ans: 0 },
            { type: "son", q: "Falaq surasi necha oyat?", ayah: "Ù…ÙÙ† Ø´ÙØ±ÙÙ‘ Ù…ÙØ§ Ø®ÙÙ„ÙÙ‚Ù", opts: ["5 ta", "4 ta", "6 ta", "3 ta"], ans: 0 },
            { type: "sifat", q: "Ikhlos surasida Allohning qaysi sifati kelgan?", ayah: "Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„ØµÙÙ‘Ù…ÙØ¯Ù", opts: ["Samad - Muhtojsiz", "Ahad - Yagona", "Quddus - Pok", "Malik - Podshoh"], ans: 0 },
            { type: "davom", q: "Oyat davomi?", ayah: "Ù„ÙÙ…Ù’ ÙŠÙÙ„ÙØ¯Ù’ ...", opts: ["ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙÙˆÙ„ÙØ¯Ù’", "ÙˆÙÙ„ÙÙ…Ù’ ÙŠÙÙƒÙÙ†", "ÙˆÙÙ„ÙØ§ Ø£ÙØ­ÙØ¯ÙŒ", "ÙˆÙÙ‡ÙÙˆÙ Ø§Ù„Ù’ÙˆÙØ§Ø­ÙØ¯Ù"], ans: 0 },
            { type: "farq", q: "Bu ikki sura o'rtasidagi farq?", ayah: "Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ø§Ù„Ù’ÙÙÙ„ÙÙ‚Ù / Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨ÙÙ‘ Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù", opts: ["Falaq va Nos", "Ikhlos va Kafirun", "Nos va Kafirun", "Falaq va Ikhlos"], ans: 0 },
            { type: "sura", q: "Bu qaysi sura?", ayah: "Ø¥ÙÙ†ÙÙ‘Ø§ Ø£ÙÙ†Ø²ÙÙ„Ù’Ù†ÙØ§Ù‡Ù ÙÙÙŠ Ù„ÙÙŠÙ’Ù„ÙØ©Ù Ø§Ù„Ù’Ù‚ÙØ¯Ù’Ø±Ù", opts: ["Qadr", "Duho", "Sharh", "Tin"], ans: 0 }
        ]
    };

    // Boshqa juzlar uchun generatsiya
    for (let j = 2; j <= 29; j++) {
        if (!QUESTIONS[j]) {
            QUESTIONS[j] = [
                { type: "amal", q: "Bu oyatda qanday buyruq berilgan?", ayah: "ÙˆÙØ£ÙÙ‚ÙÙŠÙ…ÙÙˆØ§ Ø§Ù„ØµÙÙ‘Ù„ÙØ§Ø©Ù ÙˆÙØ¢ØªÙÙˆØ§ Ø§Ù„Ø²ÙÙ‘ÙƒÙØ§Ø©Ù", opts: ["Namoz va zakot", "Ro'za va haj", "Sabr va shukr", "Tavba va istig'for"], ans: 0 },
                { type: "ma'no", q: "Bu oyat nimani bildiradi?", ayah: "Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙØ¹Ù Ø§Ù„ØµÙÙ‘Ø§Ø¨ÙØ±ÙÙŠÙ†Ù", opts: ["Alloh sabrlilar bilan", "Alloh boylar bilan", "Alloh olimlar bilan", "Alloh kuchlilar bilan"], ans: 0 },
                { type: "mavzu", q: "Bu oyatda nima haqida so'z bormoqda?", ayah: "ÙˆÙÙ…ÙÙ† ÙŠÙØªÙÙˆÙÙƒÙÙ‘Ù„Ù’ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙÙÙ‡ÙÙˆÙ Ø­ÙØ³Ù’Ø¨ÙÙ‡Ù", opts: ["Tavakkul qilish", "Sabr qilish", "Shukr qilish", "Taqvo qilish"], ans: 0 },
                { type: "kim", q: "Bu oyatda kimlar maqtalmoqda?", ayah: "ÙˆÙØ§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ ÙˆÙØ¹ÙÙ…ÙÙ„ÙÙˆØ§ Ø§Ù„ØµÙÙ‘Ø§Ù„ÙØ­ÙØ§ØªÙ", opts: ["Iymonli va solih amal qilganlar", "Faqat iymonlilar", "Faqat solih amal qilganlar", "Barcha insonlar"], ans: 0 },
                { type: "sifat", q: "Bu oyatda qaysi fazilatga chaqirilmoqda?", ayah: "ÙÙØ§ØµÙ’Ø¨ÙØ±Ù’ ØµÙØ¨Ù’Ø±Ù‹Ø§ Ø¬ÙÙ…ÙÙŠÙ„Ù‹Ø§", opts: ["Chiroyli sabr", "Chiroyli shukr", "Chiroyli ibodat", "Chiroyli axloq"], ans: 0 },
                { type: "amal", q: "Bu oyatda nima buyurilmoqda?", ayah: "ÙÙØ§Ø°Ù’ÙƒÙØ±ÙÙˆÙ†ÙÙŠ Ø£ÙØ°Ù’ÙƒÙØ±Ù’ÙƒÙÙ…Ù’", opts: ["Allohni zikr qilish", "Namoz o'qish", "Ro'za tutish", "Sadaqa berish"], ans: 0 },
                { type: "mavzu", q: "Bu oyat qaysi mavzuga oid?", ayah: "Ø§Ø¯Ù’Ø¹ÙÙˆØ§ Ø±ÙØ¨ÙÙ‘ÙƒÙÙ…Ù’ ØªÙØ¶ÙØ±ÙÙ‘Ø¹Ù‹Ø§ ÙˆÙØ®ÙÙÙ’ÙŠÙØ©Ù‹", opts: ["Duo odobi", "Namoz qoidalari", "Zakot tartibi", "Haj amallari"], ans: 0 },
                { type: "sifat", q: "Allohning qaysi sifatlari zikr qilingan?", ayah: "ÙˆÙÙ‡ÙÙˆÙ Ø§Ù„Ù’ØºÙÙÙÙˆØ±Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù", opts: ["Mag'firatli va Rahimli", "Kuchli va Qudratli", "Biluvchi va Eshituvchi", "Yaratuvchi va Rizq beruvchi"], ans: 0 },
                { type: "va'd", q: "Bu oyatda qanday va'd berilgan?", ayah: "Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙØ§ ÙŠÙØ¶ÙÙŠØ¹Ù Ø£ÙØ¬Ù’Ø±Ù Ø§Ù„Ù’Ù…ÙØ­Ù’Ø³ÙÙ†ÙÙŠÙ†Ù", opts: ["Yaxshilarning ajri zoe bo'lmaydi", "Boylar jannatga kiradi", "Kuchlilar g'olib bo'ladi", "Olimlar hurmat ko'radi"], ans: 0 },
                { type: "amal", q: "Bu oyatda qaysi amal buyurilgan?", ayah: "ÙˆÙØ£ÙÙ†ÙÙÙ‚ÙÙˆØ§ ÙÙÙŠ Ø³ÙØ¨ÙÙŠÙ„Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", opts: ["Alloh yo'lida sarflash", "Alloh yo'lida namoz", "Alloh yo'lida ro'za", "Alloh yo'lida haj"], ans: 0 },
                { type: "ma'no", q: "Bu oyat qanday ma'noni bildiradi?", ayah: "ÙˆÙÙ„ÙØ§ ØªÙÙŠÙ’Ø£ÙØ³ÙÙˆØ§ Ù…ÙÙ† Ø±ÙÙ‘ÙˆÙ’Ø­Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", opts: ["Alloh rahmatidan umid uzmang", "Allohdan qo'rqing", "Allohga ibodat qiling", "Allohni eslang"], ans: 0 },
                { type: "davom", q: "Oyatning davomi qanday?", ayah: "Ø§Ø¯Ù’Ø¹ÙÙˆÙ†ÙÙŠ ...", opts: ["Ø£ÙØ³Ù’ØªÙØ¬ÙØ¨Ù’ Ù„ÙÙƒÙÙ…Ù’", "Ø£ÙØ±Ù’Ø­ÙÙ…Ù’ÙƒÙÙ…Ù’", "Ø£ÙÙ‡Ù’Ø¯ÙÙƒÙÙ…Ù’", "Ø£ÙÙ†Ù’ØµÙØ±Ù’ÙƒÙÙ…Ù’"], ans: 0 }
            ];
        }
    }

    // Davom testlari
    const CONTINUATIONS = [
        { start: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù", opts: ["Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙ†Ù", "Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù", "Ù…ÙØ§Ù„ÙÙƒÙ ÙŠÙÙˆÙ’Ù…Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù", "Ø§Ù„Ù’ÙˆÙØ§Ø­ÙØ¯Ù Ø§Ù„Ù’Ù‚ÙÙ‡ÙÙ‘Ø§Ø±Ù"], ans: 0 },
        { start: "Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù", opts: ["Ø£ÙØ­ÙØ¯ÙŒ", "ÙˆÙØ§Ø­ÙØ¯ÙŒ", "ØµÙÙ…ÙØ¯ÙŒ", "ÙƒÙØ¨ÙÙŠØ±ÙŒ"], ans: 0 },
        { start: "Ø¥ÙÙ†ÙÙ‘Ø§ Ø£ÙØ¹Ù’Ø·ÙÙŠÙ’Ù†ÙØ§ÙƒÙ", opts: ["Ø§Ù„Ù’ÙƒÙÙˆÙ’Ø«ÙØ±Ù", "Ø§Ù„Ù’Ø®ÙÙŠÙ’Ø±Ù", "Ø§Ù„Ù†ÙÙ‘ØµÙ’Ø±Ù", "Ø§Ù„Ù’ÙÙØªÙ’Ø­Ù"], ans: 0 },
        { start: "ØªÙØ¨ÙÙ‘ØªÙ’ ÙŠÙØ¯ÙØ§", opts: ["Ø£ÙØ¨ÙÙŠ Ù„ÙÙ‡ÙØ¨Ù ÙˆÙØªÙØ¨ÙÙ‘", "Ø§Ù„Ù’ÙƒÙØ§ÙÙØ±Ù ÙˆÙØ®ÙØ³ÙØ±Ù", "Ø§Ù„Ø¸ÙÙ‘Ø§Ù„ÙÙ…Ù ÙˆÙÙ‡ÙÙ„ÙÙƒÙ", "Ø§Ù„Ù’Ù…ÙØ´Ù’Ø±ÙÙƒÙ ÙˆÙØ¶ÙÙ„ÙÙ‘"], ans: 0 },
        { start: "Ø¥ÙØ°ÙØ§ Ø¬ÙØ§Ø¡Ù Ù†ÙØµÙ’Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", opts: ["ÙˆÙØ§Ù„Ù’ÙÙØªÙ’Ø­Ù", "ÙˆÙØ§Ù„Ù†ÙÙ‘ØµÙ’Ø±Ù", "ÙˆÙØ§Ù„Ù’Ø¹ÙØ²ÙÙ‘Ø©Ù", "ÙˆÙØ§Ù„Ù’Ù‡ÙØ¯ÙÙ‰Ù°"], ans: 0 },
        { start: "Ù‚ÙÙ„Ù’ ÙŠÙØ§ Ø£ÙÙŠÙÙ‘Ù‡ÙØ§", opts: ["Ø§Ù„Ù’ÙƒÙØ§ÙÙØ±ÙÙˆÙ†Ù", "Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙˆÙ†Ù", "Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù", "Ø§Ù„Ù’Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙˆÙ†Ù"], ans: 0 },
        { start: "Ø£ÙÙ„ÙÙ…Ù’ Ù†ÙØ´Ù’Ø±ÙØ­Ù’ Ù„ÙÙƒÙ", opts: ["ØµÙØ¯Ù’Ø±ÙÙƒÙ", "Ù‚ÙÙ„Ù’Ø¨ÙÙƒÙ", "Ø£ÙÙ…Ù’Ø±ÙÙƒÙ", "Ø°ÙÙƒÙ’Ø±ÙÙƒÙ"], ans: 0 },
        { start: "ÙˆÙØ§Ù„Ù’Ø¹ÙØµÙ’Ø±Ù Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ø¥ÙÙ†Ø³ÙØ§Ù†Ù", opts: ["Ù„ÙÙÙÙŠ Ø®ÙØ³Ù’Ø±Ù", "Ù„ÙÙÙÙŠ Ø¶ÙÙ„ÙØ§Ù„Ù", "Ù„ÙÙÙÙŠ ØºÙÙÙ’Ù„ÙØ©Ù", "Ù„ÙÙÙÙŠ Ø¹ÙØ°ÙØ§Ø¨Ù"], ans: 0 },
        { start: "Ø¥ÙÙ†ÙÙ‘Ø§ Ø£ÙÙ†Ø²ÙÙ„Ù’Ù†ÙØ§Ù‡Ù ÙÙÙŠ", opts: ["Ù„ÙÙŠÙ’Ù„ÙØ©Ù Ø§Ù„Ù’Ù‚ÙØ¯Ù’Ø±Ù", "Ø´ÙÙ‡Ù’Ø±Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù", "Ù„ÙÙŠÙ’Ù„ÙØ©Ù Ù…ÙØ¨ÙØ§Ø±ÙÙƒÙØ©Ù", "ÙŠÙÙˆÙ’Ù…Ù Ù…ÙØ¹Ù’Ù„ÙÙˆÙ…Ù"], ans: 0 },
        { start: "Ø§Ù‚Ù’Ø±ÙØ£Ù’ Ø¨ÙØ§Ø³Ù’Ù…Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ", opts: ["Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø®ÙÙ„ÙÙ‚Ù", "Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø¹ÙÙ„ÙÙ‘Ù…Ù", "Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ù‡ÙØ¯ÙÙ‰Ù°", "Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø±ÙØ²ÙÙ‚Ù"], ans: 0 },
        { start: "Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù", opts: ["Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù", "Ø§Ù„Ù’ÙƒÙØ±ÙÙŠÙ…Ù", "Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ù", "Ø§Ù„Ù’Ø­ÙÙƒÙÙŠÙ…Ù"], ans: 0 },
        { start: "Ø¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ¹Ù’Ø¨ÙØ¯Ù", opts: ["ÙˆÙØ¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ³Ù’ØªÙØ¹ÙÙŠÙ†Ù", "ÙˆÙØ¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ³Ù’Ø£ÙÙ„Ù", "ÙˆÙØ¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ±Ù’Ø¬ÙÙˆ", "ÙˆÙØ¥ÙÙŠÙÙ‘Ø§ÙƒÙ Ù†ÙØ®ÙØ§ÙÙ"], ans: 0 },
        { start: "ÙÙØ¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù", opts: ["ÙŠÙØ³Ù’Ø±Ù‹Ø§", "ÙÙØ±ÙØ¬Ù‹Ø§", "ØµÙØ¨Ù’Ø±Ù‹Ø§", "Ø£ÙØ¬Ù’Ø±Ù‹Ø§"], ans: 0 },
        { start: "ÙˆÙÙ…ÙØ§ Ø£ÙØ±Ù’Ø³ÙÙ„Ù’Ù†ÙØ§ÙƒÙ Ø¥ÙÙ„ÙÙ‘Ø§", opts: ["Ø±ÙØ­Ù’Ù…ÙØ©Ù‹ Ù„ÙÙ‘Ù„Ù’Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙ†Ù", "Ø¨ÙØ´ÙÙŠØ±Ù‹Ø§ ÙˆÙÙ†ÙØ°ÙÙŠØ±Ù‹Ø§", "Ù‡ÙØ§Ø¯ÙÙŠÙ‹Ø§ ÙˆÙÙ…ÙØ¨ÙØ´ÙÙ‘Ø±Ù‹Ø§", "Ø´ÙØ§Ù‡ÙØ¯Ù‹Ø§ ÙˆÙÙ…ÙØ¨ÙØ´ÙÙ‘Ø±Ù‹Ø§"], ans: 0 },
        { start: "ÙˆÙÙ‚ÙÙ„ Ø±ÙÙ‘Ø¨ÙÙ‘", opts: ["Ø²ÙØ¯Ù’Ù†ÙÙŠ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§", "Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙŠ", "Ø§Ø±Ù’Ø­ÙÙ…Ù’Ù†ÙÙŠ", "Ø§Ù‡Ù’Ø¯ÙÙ†ÙÙŠ"], ans: 0 }
    ];

    // Hikmatlar
    const WISDOMS = [
        { ayah: "ÙˆÙÙ…ÙÙ† ÙŠÙØªÙÙ‘Ù‚Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙŠÙØ¬Ù’Ø¹ÙÙ„ Ù„ÙÙ‘Ù‡Ù Ù…ÙØ®Ù’Ø±ÙØ¬Ù‹Ø§ ÙˆÙÙŠÙØ±Ù’Ø²ÙÙ‚Ù’Ù‡Ù Ù…ÙÙ†Ù’ Ø­ÙÙŠÙ’Ø«Ù Ù„ÙØ§ ÙŠÙØ­Ù’ØªÙØ³ÙØ¨Ù", ref: "Talaq, 2-3", title: "Taqvo va rizq", text: "Kim Allohdan qo'rqsa, U unga qiyinchilikdan chiqish yo'lini ko'rsatadi va kutilmagan joydan rizq beradi." },
        { ayah: "ÙÙØ¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§ Ø¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§", ref: "Sharh, 5-6", title: "Qiyinchilik bilan osonlik", text: "Har bir qiyinchilik bilan birga osonlik bor. Bu ikki marta takrorlanib, umidsizlikka yo'l qo'ymaslikni o'rgatadi." },
        { ayah: "ÙˆÙÙ‚ÙÙ„ Ø±ÙÙ‘Ø¨ÙÙ‘ Ø²ÙØ¯Ù’Ù†ÙÙŠ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§", ref: "Toha, 114", title: "Ilm so'rash", text: "Payg'ambarimizga ilmni ziyoda qilishni so'rash buyurilgan. Ilm - eng qimmatli boylik." },
        { ayah: "ÙˆÙØ§ØµÙ’Ø¨ÙØ±Ù’ ÙÙØ¥ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙØ§ ÙŠÙØ¶ÙÙŠØ¹Ù Ø£ÙØ¬Ù’Ø±Ù Ø§Ù„Ù’Ù…ÙØ­Ù’Ø³ÙÙ†ÙÙŠÙ†Ù", ref: "Hud, 115", title: "Sabr va mukofot", text: "Sabr qilgan kishining ajri hech qachon zoe ketmaydi. Alloh yaxshilik qiluvchilarni mukofotlaydi." },
        { ayah: "Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙØ¹Ù Ø§Ù„ØµÙÙ‘Ø§Ø¨ÙØ±ÙÙŠÙ†Ù", ref: "Baqara, 153", title: "Allohning yordami", text: "Alloh sabr qiluvchilar bilan birga. Bu eng katta dalda va qo'llab-quvvatlash." },
        { ayah: "ÙˆÙØ°ÙÙƒÙÙ‘Ø±Ù’ ÙÙØ¥ÙÙ†ÙÙ‘ Ø§Ù„Ø°ÙÙ‘ÙƒÙ’Ø±ÙÙ‰Ù° ØªÙÙ†ÙÙØ¹Ù Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù", ref: "Zariyot, 55", title: "Eslatmaning foydasi", text: "Eslatma mo'minlarga foyda beradi. Nasihat qabul qilish - iymonning belgisi." },
        { ayah: "ÙˆÙÙ„ÙØ§ ØªÙÙŠÙ’Ø£ÙØ³ÙÙˆØ§ Ù…ÙÙ† Ø±ÙÙ‘ÙˆÙ’Ø­Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù", ref: "Yusuf, 87", title: "Umidsizlik harom", text: "Allohning rahmatidan umid uzish faqat kofirlarga xos. Mo'min doimo umidvor bo'ladi." },
        { ayah: "Ø§Ø¯Ù’Ø¹ÙÙˆÙ†ÙÙŠ Ø£ÙØ³Ù’ØªÙØ¬ÙØ¨Ù’ Ù„ÙÙƒÙÙ…Ù’", ref: "G'ofir, 60", title: "Duo qabul bo'ladi", text: "Alloh duoni qabul qilishga va'da bergan. Faqat chin dildan so'rash kerak." },
        { ayah: "ÙˆÙÙ†ÙÙ†ÙØ²ÙÙ‘Ù„Ù Ù…ÙÙ†Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù Ù…ÙØ§ Ù‡ÙÙˆÙ Ø´ÙÙÙØ§Ø¡ÙŒ ÙˆÙØ±ÙØ­Ù’Ù…ÙØ©ÙŒ", ref: "Isro, 82", title: "Qur'on - shifo", text: "Qur'on mo'minlar uchun ruhiy va jismoniy shifoda. Uni o'qish - eng yaxshi davo." },
        { ayah: "Ø£ÙÙ„ÙØ§ Ø¨ÙØ°ÙÙƒÙ’Ø±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ØªÙØ·Ù’Ù…ÙØ¦ÙÙ†ÙÙ‘ Ø§Ù„Ù’Ù‚ÙÙ„ÙÙˆØ¨Ù", ref: "Ra'd, 28", title: "Qalb xotirjamligi", text: "Haqiqiy tinchlik faqat Allohni zikr qilishda. Boshqa hech narsa qalbni to'ldirmaydi." },
        { ayah: "ÙˆÙÙ…ÙØ§ Ø£ÙØ±Ù’Ø³ÙÙ„Ù’Ù†ÙØ§ÙƒÙ Ø¥ÙÙ„ÙÙ‘Ø§ Ø±ÙØ­Ù’Ù…ÙØ©Ù‹ Ù„ÙÙ‘Ù„Ù’Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙ†Ù", ref: "Anbiyo, 107", title: "Payg'ambar - rahmat", text: "Muhammad ï·º barcha olamlar uchun rahmat sifatida yuborilgan." },
        { ayah: "Ø¥ÙÙ†ÙÙ‘Ù…ÙØ§ Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙˆÙ†Ù Ø¥ÙØ®Ù’ÙˆÙØ©ÙŒ", ref: "Hujurot, 10", title: "Mo'minlar birodar", text: "Barcha mo'minlar bir-biriga birodardir. Bu birlik va hamjihatlikka chaqiriq." },
        { ayah: "ÙˆÙØ¹ÙØ³ÙÙ‰Ù° Ø£ÙÙ† ØªÙÙƒÙ’Ø±ÙÙ‡ÙÙˆØ§ Ø´ÙÙŠÙ’Ø¦Ù‹Ø§ ÙˆÙÙ‡ÙÙˆÙ Ø®ÙÙŠÙ’Ø±ÙŒ Ù„ÙÙ‘ÙƒÙÙ…Ù’", ref: "Baqara, 216", title: "Yashirin yaxshilik", text: "Ba'zan yoqtirmagan narsangiz sizga yaxshi bo'lishi mumkin. Alloh eng yaxshisini biladi." },
        { ayah: "ÙˆÙÙ…ÙÙ† ÙŠÙØªÙÙˆÙÙƒÙÙ‘Ù„Ù’ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙÙÙ‡ÙÙˆÙ Ø­ÙØ³Ù’Ø¨ÙÙ‡Ù", ref: "Talaq, 3", title: "Tavakkul", text: "Kim Allohga tavakkul qilsa, Alloh unga yetarli. Tavakkul - eng kuchli tayanch." },
        { ayah: "Ù‚ÙÙ„Ù’ Ù„ÙÙ‘Ù† ÙŠÙØµÙÙŠØ¨ÙÙ†ÙØ§ Ø¥ÙÙ„ÙÙ‘Ø§ Ù…ÙØ§ ÙƒÙØªÙØ¨Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙÙ†ÙØ§", ref: "Tavba, 51", title: "Taqdir", text: "Bizga faqat Alloh yozgan narsa yetadi. Bu iymonning muhim qismi." }
    ];

    // Tavsiyalar
    const ADVICES = [
        { title: "Muntazam vaqt belgilang", text: "Har kuni bir xil vaqtda yodlang. Eng yaxshi vaqt - bomdoddan keyin yoki tong otishidan oldin. Miyaning eng faol vaqti." },
        { title: "Oz-ozdan, lekin puxta", text: "Kuniga 5-10 oyat yodlab puxta qiling. Ko'p yodlab unutishdan ko'ra, oz yodlab mustahkam eslab qolish yaxshiroq." },
        { title: "Ma'nosini tushuning", text: "Oyatning ma'nosini bilib yodlash 3 barobar oson. Tafsir kitoblarini o'qing, oyatlar bog'lanishini tushuning." },
        { title: "20 marta takrorlang", text: "Yangi yodlagan oyatni kamida 20 marta takrorlang. Bir kunda kamida 3 marta qaytaring: ertalab, tushda, kechqurun." },
        { title: "Bir mushafdan foydalaning", text: "Doimo bir xil mushafdan o'qing. Ko'z sahifadagi joyni eslab qoladi - bu vizual xotira." },
        { title: "Eski yodlaganni takrorlang", text: "Yangi yodlashdan oldin avvalgilarni takrorlang. 1 yangi + 5 eskini takrorlash qoidasi." },
        { title: "Ustozdan nazorat oling", text: "Haftada kamida 1 marta ustozga tinglatib boring. Xatolarni erta aniqlash juda muhim." },
        { title: "Tinglash orqali mustahkamlang", text: "Qori qiroatlarini tinglang. Mashinada, yurganingizda, uxlashdan oldin. Bu eshitish xotirasini ishga soladi." },
        { title: "Namozda o'qing", text: "Yodlaganingizni namozda o'qing. Amaliy qo'llash - eng yaxshi mustahkamlash usuli." },
        { title: "Gunohlardan saqlaning", text: "Gunohlar xotirani zaiflashtiradi. Ko'z, quloq va tilni haromdan asrang. Taqvo - yodlashning asosi." },
        { title: "Duo qiling", text: "Yodlashdan oldin va keyin duo qiling. 'Robbiy zidniy ilma' duosi. Ilm - Allohning ne'mati." },
        { title: "Sabr va istiqomat", text: "Hofiz bo'lish 2-5 yil oladi. Qiyin kunlar bo'ladi, lekin to'xtamang. Har bir harf uchun savob bor." }
    ];

    // ==================== HOLATLAR ====================
    let currentJuz = null;
    let questions = [];
    let qIndex = 0;
    let okCount = 0;
    let errCount = 0;
    let answered = false;
    let isFullTest = false;

    let contQuestions = [];
    let contIndex = 0;
    let contOk = 0;
    let contErr = 0;
    let contAnswered = false;

    // ==================== FUNKSIYALAR ====================

    function goTo(page) {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.getElementById(page).classList.add('active');

        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        const navBtns = document.querySelectorAll('nav button');
        const pages = ['home', 'juz', 'continue', 'wisdom', 'advice'];
        const idx = pages.indexOf(page);
        if (idx >= 0 && navBtns[idx]) navBtns[idx].classList.add('active');

        if (page === 'continue') startContinue();

        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function buildJuz() {
        const grid = document.getElementById('juzGrid');
        grid.innerHTML = '';
        for (let i = 1; i <= 30; i++) {
            const btn = document.createElement('div');
            btn.className = 'juz-btn';
            btn.innerHTML = `${i}<small>Juz</small>`;
            btn.onclick = () => startJuzTest(i);
            grid.appendChild(btn);
        }
    }

    function startJuzTest(juz) {
        currentJuz = juz;
        isFullTest = false;
        questions = shuffle([...QUESTIONS[juz]]).slice(0, 10);
        qIndex = 0;
        okCount = 0;
        errCount = 0;
        answered = false;

        document.getElementById('testTitle').textContent = `Juz ${juz} - Test`;
        goTo('test');
        showQuestion();
    }

    function startFullTest() {
        isFullTest = true;
        currentJuz = null;
        let all = [];
        for (let j = 1; j <= 30; j++) {
            if (QUESTIONS[j]) all = all.concat(QUESTIONS[j]);
        }
        questions = shuffle(all).slice(0, 20);
        qIndex = 0;
        okCount = 0;
        errCount = 0;
        answered = false;

        document.getElementById('testTitle').textContent = "Butun Qur'on - Test";
        goTo('test');
        showQuestion();
    }

    function showQuestion() {
        const q = questions[qIndex];
        const total = questions.length;

        document.getElementById('qNum').textContent = `Savol ${qIndex + 1}/${total}`;
        document.getElementById('qType').textContent = q.type.charAt(0).toUpperCase() + q.type.slice(1);
        document.getElementById('qText').textContent = q.q;
        document.getElementById('qAyah').textContent = q.ayah;
        document.getElementById('cntOk').textContent = okCount;
        document.getElementById('cntErr').textContent = errCount;
        document.getElementById('progBar').style.width = `${(qIndex / total) * 100}%`;

        const fb = document.getElementById('feedback');
        fb.className = 'feedback';
        fb.textContent = '';

        document.getElementById('nextBtn').classList.remove('show');

        const box = document.getElementById('optsBox');
        box.innerHTML = '';

        const letters = ['A', 'B', 'C', 'D'];
        q.opts.forEach((opt, i) => {
            const div = document.createElement('div');
            div.className = 'option';
            div.innerHTML = `<div class="opt-letter">${letters[i]}</div><div class="opt-text">${opt}</div>`;
            div.onclick = () => selectAnswer(i);
            box.appendChild(div);
        });

        answered = false;
    }

    function selectAnswer(idx) {
        if (answered) return;
        answered = true;

        const q = questions[qIndex];
        const opts = document.querySelectorAll('#optsBox .option');

        opts.forEach(o => o.classList.add('locked'));
        opts[idx].classList.add('selected');

        const fb = document.getElementById('feedback');

        if (idx === q.ans) {
            okCount++;
            opts[idx].classList.remove('selected');
            opts[idx].classList.add('correct');
            fb.className = 'feedback ok show';
            fb.textContent = 'âœ… To'g'ri javob!';
        } else {
            errCount++;
            opts[idx].classList.remove('selected');
            opts[idx].classList.add('wrong');
            opts[q.ans].classList.add('correct');
            fb.className = 'feedback err show';
            fb.textContent = 'âŒ Noto'g'ri. To'g'ri javob ko'rsatildi.';
        }

        document.getElementById('cntOk').textContent = okCount;
        document.getElementById('cntErr').textContent = errCount;

        if (qIndex < questions.length - 1) {
            document.getElementById('nextBtn').classList.add('show');
        } else {
            setTimeout(showResults, 1200);
        }
    }

    function nextQ() {
        qIndex++;
        showQuestion();
    }

    function showResults() {
        const total = questions.length;
        const pct = Math.round((okCount / total) * 100);

        document.getElementById('resPct').textContent = pct + '%';
        document.getElementById('resTotal').textContent = total;
        document.getElementById('resOk').textContent = okCount;
        document.getElementById('resErr').textContent = errCount;

        const grade = document.getElementById('resGrade');
        const tip = document.getElementById('resTip');

        if (pct >= 90) {
            grade.className = 'grade excellent';
            grade.textContent = 'ğŸ† A'lo natija!';
            tip.textContent = 'Ajoyib! Bilimingiz juda yaxshi. Boshqalarga ham o'rgating va davom eting.';
        } else if (pct >= 70) {
            grade.className = 'grade good';
            grade.textContent = 'ğŸ‘ Yaxshi';
            tip.textContent = 'Yaxshi natija! Ozgina takrorlash bilan mukammallikka yetasiz.';
        } else if (pct >= 50) {
            grade.className = 'grade average';
            grade.textContent = 'ğŸ“š O'rtacha';
            tip.textContent = 'Ko'proq takrorlash kerak. Qiyin joylarni alohida o'rganing.';
        } else {
            grade.className = 'grade poor';
            grade.textContent = 'ğŸ’ª Ko'proq harakat';
            tip.textContent = 'Yaxshiroq tayyorgarlik kerak. Har kuni muntazam takrorlang.';
        }

        document.getElementById('progBar').style.width = '100%';
        goTo('results');
    }

    function retry() {
        if (isFullTest) {
            startFullTest();
        } else if (currentJuz) {
            startJuzTest(currentJuz);
        } else {
            goTo('juz');
        }
    }

    // DAVOMINI TOP
    function startContinue() {
        contQuestions = shuffle([...CONTINUATIONS]);
        contIndex = 0;
        contOk = 0;
        contErr = 0;
        contAnswered = false;
        showContinue();
    }

    function showContinue() {
        const q = contQuestions[contIndex];
        const total = contQuestions.length;

        document.getElementById('contNum').textContent = `Savol ${contIndex + 1}/${total}`;
        document.getElementById('contAyah').textContent = q.start + ' ...';
        document.getElementById('contOk').textContent = contOk;
        document.getElementById('contErr').textContent = contErr;
        document.getElementById('contProg').style.width = `${(contIndex / total) * 100}%`;

        const fb = document.getElementById('contFeed');
        fb.className = 'feedback';
        fb.textContent = '';

        document.getElementById('contNext').classList.remove('show');

        const box = document.getElementById('contOpts');
        box.innerHTML = '';

        const letters = ['A', 'B', 'C', 'D'];
        q.opts.forEach((opt, i) => {
            const div = document.createElement('div');
            div.className = 'option';
            div.innerHTML = `<div class="opt-letter">${letters[i]}</div><div class="opt-text"><span class="arabic" style="font-size:1.4rem">${opt}</span></div>`;
            div.onclick = () => selectContinue(i);
            box.appendChild(div);
        });

        contAnswered = false;
    }

    function selectContinue(idx) {
        if (contAnswered) return;
        contAnswered = true;

        const q = contQuestions[contIndex];
        const opts = document.querySelectorAll('#contOpts .option');

        opts.forEach(o => o.classList.add('locked'));
        opts[idx].classList.add('selected');

        const fb = document.getElementById('contFeed');

        if (idx === q.ans) {
            contOk++;
            opts[idx].classList.remove('selected');
            opts[idx].classList.add('correct');
            fb.className = 'feedback ok show';
            fb.textContent = 'âœ… To'g'ri javob!';
        } else {
            contErr++;
            opts[idx].classList.remove('selected');
            opts[idx].classList.add('wrong');
            opts[q.ans].classList.add('correct');
            fb.className = 'feedback err show';
            fb.textContent = 'âŒ Noto'g'ri. To'g'ri javob ko'rsatildi.';
        }

        document.getElementById('contOk').textContent = contOk;
        document.getElementById('contErr').textContent = contErr;

        if (contIndex < contQuestions.length - 1) {
            document.getElementById('contNext').classList.add('show');
        } else {
            setTimeout(() => {
                questions = contQuestions;
                okCount = contOk;
                errCount = contErr;
                showResults();
            }, 1200);
        }
    }

    function nextCont() {
        contIndex++;
        showContinue();
    }

    // HIKMATLAR
    function buildWisdom() {
        const box = document.getElementById('wisdomBox');
        box.innerHTML = '';
        WISDOMS.forEach(w => {
            const div = document.createElement('div');
            div.className = 'wisdom-card';
            div.innerHTML = `
                <div class="wisdom-ayah">
                    <div class="arabic">${w.ayah}</div>
                    <div class="wisdom-ref">${w.ref}</div>
                </div>
                <div class="wisdom-body">
                    <h4>${w.title}</h4>
                    <p>${w.text}</p>
                </div>
            `;
            box.appendChild(div);
        });
    }

    // TAVSIYALAR
    function buildAdvice() {
        const box = document.getElementById('adviceBox');
        box.innerHTML = '';
        ADVICES.forEach((a, i) => {
            const div = document.createElement('div');
            div.className = 'advice-card';
            div.innerHTML = `
                <div class="advice-num">${i + 1}</div>
                <div class="advice-text">
                    <h4>${a.title}</h4>
                    <p>${a.text}</p>
                </div>
            `;
            box.appendChild(div);
        });
    }

    // YORDAMCHI
    function shuffle(arr) {
        const a = [...arr];
        for (let i = a.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
    }

    // ISHGA TUSHIRISH
    document.addEventListener('DOMContentLoaded', function() {
        buildJuz();
        buildWisdom();
        buildAdvice();
    });
    </script>
</body>
</html>
